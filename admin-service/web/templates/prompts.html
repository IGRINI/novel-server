{{ template "layout.html" . }}

{{ define "title" }}Управление Промптами{{ end }}

{{ define "content" }}
{{/* Убраны дублирующиеся <!DOCTYPE>, <html>, <head>, <body> и ссылки на Bootstrap */}}

<div class="app-container">
    <nav class="breadcrumbs">
        <ul>
            <li><a href="/admin/dashboard">Дашборд</a></li>
            <li>Управление Промптами</li>
        </ul>
    </nav>

    <h1>Управление Промптами</h1>

    <!-- Flash Message Display -->
    {{ if .flashMessage }}
        <div class="system-message {{ if eq .flashType "success" }}system-message--success{{ else }}system-message--error{{ end }} mb-3">
             {{ .flashMessage }}
             {{/* Кнопку закрытия убираем, если layout ее не поддерживает */}}
        </div>
    {{ end }}
    <!-- End Flash Message Display -->


    <div class="button-group mb-3">
        {{/* Кнопка "Add New Prompt Key" - ведет на форму создания КЛЮЧА */}}
        <a href="/admin/prompts/new" class="cta-button cta-button--primary">Создать Ключ Промпта</a>
    </div>

    {{if not .promptKeys}}
        <div class="system-message system-message--info">Ключи промптов не найдены.</div>
    {{else}}
    <div class="content-card"> {{/* Оборачиваем таблицу в карточку */}}
        <div class="content-card-header">Список Ключей Промптов</div>
        <div class="content-card-body">
            <table class="data-table">
                <thead>
                <tr>
                    <th>Ключ</th>
                    <th style="width: 25%;">Действия</th>
                </tr>
                </thead>
                <tbody>
                {{ range .promptKeys }}
                <tr>
                    <td>{{ . }}</td>
                    <td>
                        <div class="button-group" style="justify-content: flex-start;">
                            {{/* Ссылка на редактирование ведет на новую страницу по ключу */}}
                            <a href="/admin/prompts/key/{{ . }}/edit" class="cta-button cta-button--primary btn-sm">Редактировать языки</a>
                            {{/* TODO: Добавить кнопку/форму для удаления ключа целиком? */}}
                            {{/* <form action="/admin/prompts/key/{{ . }}/delete" method="post" style="display: inline; margin: 0;" onsubmit="return confirm('Вы уверены, что хотите удалить ключ {{ . }} со всеми языками?');">
                                <button type="submit" class="cta-button cta-button--danger btn-sm">Удалить ключ</button>
                            </form> */}}
                         </div>
                    </td>
                </tr>
                {{ else }}
                <tr>
                    <td colspan="2" style="text-align: center;">Ключи промптов не найдены.</td> {{/* colspan="2" */}}
                </tr>
                {{ end }}
                </tbody>
            </table>
         </div> {{/* Конец content-card-body */}}
     </div> {{/* Конец content-card */}}
    {{ end }}
</div>

{{ end }} 